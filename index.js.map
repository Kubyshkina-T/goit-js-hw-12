{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\n\nconst API_KEY = \"54645920-7a588b5965485e203aa072a25\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\n\nexport async function getImagesByQuery(query, page) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                per_page: 15,\n                page\n            },\n        });\n        return response.data;\n    }\n    catch (error) {\n        throw error;\n    }\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadMoreBtn = document.querySelector(\".btn-load\");\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.classList.remove(\"is-hidden\");\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.add(\"is-hidden\");\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = \"\";\n}\n\nexport function showLoader() {\n    loader?.classList.remove(\"is-hidden\");\n}\n\nconst lightbox = new SimpleLightbox(`.gallery a`, {\n    captionsData: `alt`,\n    captionDelay: 250,\n});\n\nexport function createGallery(images) {\n  const markup = images.map(img => `\n    <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${img.largeImageURL}\">\n        <div class=\"photo-card\">\n          <img class=\"photo-card-img\"\n               src=\"${img.webformatURL}\"\n               alt=\"${img.tags}\"\n               loading=\"lazy\" />\n          <div class=\"info\">\n            <p class=\"info-item\"><b>Likes</b><span>${img.likes}</span></p>\n            <p class=\"info-item\"><b>Views</b><span>${img.views}</span></p>\n            <p class=\"info-item\"><b>Comments</b><span>${img.comments}</span></p>\n            <p class=\"info-item\"><b>Downloads</b><span>${img.downloads}</span></p>\n          </div>\n        </div>\n      </a>\n    </li>\n  `).join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n \n  lightbox.refresh();\n}\nexport function hideLoader() {\n    loader?.classList.add(\"is-hidden\");\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImagesByQuery } from \"./js/pixabay-api\";\nimport { createGallery } from \"./js/render-functions\";\nimport { showLoader, hideLoader } from \"./js/render-functions\";\nimport { clearGallery } from \"./js/render-functions\";\nimport { showLoadMoreButton, hideLoadMoreButton } from \"./js/render-functions\";\n\n\nconst form = document.querySelector(\".form\");\nconst inputEl = document.querySelector('input[name=\"search-text\"]');\nconst loadMore = document.querySelector(\".btn-load\");\n\nform.addEventListener(\"submit\", handleSubmit);\nloadMore.addEventListener(\"click\", onLoadMore);\n\nlet page = 1;\nlet query = \"\";\nlet totalPages = 0;\nconst PER_PAGE = 15;\n\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n\n     query = inputEl.value.trim();\n    page = 1;\n\n     if (!query) {\n    iziToast.warning({ message: \"Please enter a search query ðŸ™‚\" });\n    return;\n  }\n    clearGallery();\n    hideLoadMoreButton();\n    showLoader();\n\n    try {\n        const data = await getImagesByQuery(query, page);\n\n            if (!data.hits.length) {\n                iziToast.info({\n                    message: `Sorry, there are no images matching your search query. Please try again!`\n                });\n                return;\n        }\n        \n            totalPages = Math.ceil(data.totalHits / PER_PAGE);\n        createGallery(data.hits);\n        \n             if (page < totalPages) {\n     showLoadMoreButton();\n             }\n             else {\n      hideLoadMoreButton();\n      iziToast.info({\n          message: \"We're sorry, but you've reached the end of search results.\",\n           position: \"bottomRight\"\n      });\n    }\n\n           form.reset();\n        }\n    catch(error) {\n            iziToast.error({\n                message: `Something went wrong ðŸ˜¢`\n            });\n        }\n         finally{\n            hideLoader();\n         };\n    \n}\nasync function onLoadMore() {\n    page++;\n\n    hideLoadMoreButton();\n    showLoader();\n\n    try {\n        const data = await\n            getImagesByQuery(query, page);\n        \n        createGallery(data.hits);\n         if (page < totalPages) {\n              showLoadMoreButton();\n        }\n        else {\n hideLoadMoreButton();\n  iziToast.info({\n    message: \"We're sorry, but you've reached the end of search results.\",\n    position: \"bottomRight\"\n  });\n        }\n        \n        const card = document.querySelector(\".gallery-item\");\n        const cardHeight = card.getBoundingClientRect().height;\n        window.scrollBy({\n            left: 0,\n            top: cardHeight * 2,\n            behavior: \"smooth\"\n        })\nconsole.log();\n\n        console.log(data);\n    } catch(error) {\n        iziToast.error({\n            message: error.message\n        });\n    }\n    finally {\n         hideLoader();\n    }\n}\n\n"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","page","axios","error","gallery","loader","loadMoreBtn","showLoadMoreButton","hideLoadMoreButton","clearGallery","showLoader","lightbox","SimpleLightbox","createGallery","images","markup","img","hideLoader","form","inputEl","loadMore","handleSubmit","onLoadMore","totalPages","PER_PAGE","event","iziToast","data","cardHeight"],"mappings":"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"}